"use strict";$(function(){console.log("Hello is calling.");Wallet.setPaymentMethodTitle();$('#withdrawal-amount').on('change',function(){if(!Wallet.withdrawalAmountValidation()){return false;}});$('.withdrawal-continue-btn').on('click',function(){Wallet.initWithdrawal();});$('.custom-control').on('change',function(){$('.withdrawal-error-message').hide();});$('#payment-methods').on('change',function(){Wallet.setPaymentMethodTitle();});});var Wallet={initWithdrawal:function(){let submitButton=$('.withdrawal-continue-btn');updateButtonState('loading',submitButton,trans('Request withdrawal'),'white');if(!Wallet.withdrawalAmountValidation()){updateButtonState('loaded',submitButton,trans('Request withdrawal'));return false;}
var method=$("#payment-methods").val()??null;var bank_name=$("#bank_name").val()??null;var account_name=$("#account_name").val()??null;var account_number=$("#account_number").val()??null;var swift_code=$("#swift_code").val()??null;var paypal_email=$("#paypal_email").val()??null;$('.withdrawal-error-message').hide();$.ajax({type:'POST',data:{amount:$('#withdrawal-amount').val(),message:$('#withdrawal-message').val(),identifier:$('#withdrawal-payment-identifier').val(),method:$('#payment-methods').find(":selected").text(),bank_name:bank_name,account_name:account_name,account_number:account_number,swift_code:swift_code,paypal_email:paypal_email},url:app.baseUrl+'/withdrawals/request',success:function(result){const msgType=result.success?'success':'danger';const msgLabel=result.success?trans('Success'):trans('Error');launchToast(msgType,msgLabel,result.message);$('.wallet-total-amount').html(result.totalAmount);$('.wallet-pending-amount').html(result.pendingBalance);$('#withdrawal-amount').val('');$('#withdrawal-message').val('');$('#withdrawal-payment-identifier').val('');$('#withdrawal-amount').removeClass('is-invalid');$('#withdrawal-message').removeClass('is-invalid');updateButtonState('loaded',submitButton,trans('Request withdrawal'));},error:function(result){if(result.status===422||result.status===500){$.each(result.responseJSON.errors,function(field){if(field==='amount'){$('#withdrawal-amount').addClass('is-invalid');}
if(field==='message'){$('#withdrawal-message').addClass('is-invalid');}});}
updateButtonState('loaded',submitButton,trans('Request withdrawal'));}});},withdrawalAmountValidation:function(){let withdrawalAmount=$('#withdrawal-amount').val();if(withdrawalAmount.length===0||(withdrawalAmount.length>0&&(parseFloat(withdrawalAmount)<parseFloat(app.withdrawalsMinAmount)||parseFloat(withdrawalAmount)>parseFloat(app.withdrawalsMaxAmount)))){$('#withdrawal-amount').addClass('is-invalid');return false;}else{$('#withdrawal-amount').removeClass('is-invalid');return true;}},getPaymentIdentifierTitle:function(){let title;switch($('#payment-methods').find(":selected").text()){case'Bank transfer':title='Bank account';break;case'Paypal':case'PayPal':title='PayPal email';break;case'Crypto':title='Wallet address';break;case'Other':title='Payment account';break;default:title='Payment account';break;}
return title;},setPaymentMethodTitle:function(){let paymentIdentifierTitle=trans(Wallet.getPaymentIdentifierTitle());$('#payment-identifier-label').text(paymentIdentifierTitle);var type=$("#payment-methods").val();if(type=='bank'){$("#for_paypal").css('display','none');$("#for_bank").css('display','block');}else{$("#for_bank").css('display','none');$("#for_paypal").css('display','block');}}};"use strict";$(function(){$('.setting-menu-mobile .nav').mCustomScrollbar({theme:"minimal-dark",axis:'x',scrollInertia:200,});});$(window).scroll(function(){initStickyComponent('.settings-menu-wrapper','sticky-sm');});var GeneralSettings={updateFlagSetting:function(key,value){$.ajax({type:'POST',data:{'key':key,'value':value},dataType:'json',url:app.baseUrl+'/my/settings/flags/save',success:function(result){if(result.success){launchToast('success',trans('Success'),trans('Setting saved'));}
else{launchToast('danger',trans('Error'),trans('Setting save failed'));}},error:function(){launchToast('danger',trans('Error'),trans('Setting save failed'));}});}};"use strict";var AiSuggestions={targetedClass:null,suggestionType:null,initAISuggestions:function(selector,type){this.setTargetedClass(selector);this.setSuggestionType(type);AiSuggestions.setDefaultDescription(type);},suggestDescriptionDialog:function(){$('#suggest-description-dialog').modal('show');},setTargetedClass(className){this.targetedClass=className;},setSuggestionType(type){this.suggestionType=type;},saveSuggestion:function(){let description=$('#ai-request').val();let validDescription=this.validateDescription();if(validDescription){$('#ai-request').removeClass('is-invalid');$('#suggest-description-dialog').modal('hide');if(this.suggestionType=='profile'){ProfileSettings.mdeEditor.value(description);}
else{$(this.targetedClass).val(description);}
$('#ai-request').removeClass('is-invalid');}},clearSuggestion:function(){$('#ai-request').val('');},suggestDescription:function(){let validDescription=this.validateDescription();if(validDescription){$('#ai-request').removeClass('is-invalid');updateButtonState('loading',$('.suggest-description'),trans('Suggest'),'light');let route=app.baseUrl+'/suggestions/generate';let data={'text':$('#ai-request').val(),};$.ajax({type:'POST',data:data,url:route,success:function(response){if(response.message){$('#ai-request').val(response.message);}
updateButtonState('loaded',$('.suggest-description'),trans('Suggest'));},error:function(result){if(result.status===422||result.status===500){launchToast('danger',trans('Error'),result.responseJSON.message);}
else if(result.status===403){launchToast('danger',trans('Error'),'Something went wrong, please try again');}
updateButtonState('loaded',$('.suggest-description'),trans('Suggest'));}});}},validateDescription:function(){let description=$('#ai-request').val();if(description.length<5){$('#ai-request').addClass('is-invalid');return false;}
return true;},setDefaultDescription:function(type){let description;if(type=='post'){description=trans('Write me a short post description to post on my profile');}else if(type=='profile'){description=trans('Write me a short profile bio description');}
if(description){$('#ai-request').val(description);}}};